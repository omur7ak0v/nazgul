{% extends "base.html" %}

{% block title %}{{ event.name }} | –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç{% endblock %}

{% block content %}
<section class="event-header">
    <h2>{{ event.name }}</h2>
    <p class="event-meta">
        <span>üìÖ {{ event.date.strftime('%d.%m.%Y') }}</span>
        <span>üïí {{ event.date.strftime('%H:%M') }}</span>
    </p>
    <p>{{ event.description }}</p>

    {# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è #}
    {% if current_user.is_authenticated %}
        {# –§–û–†–ú–ê –î–õ–Ø –£–î–ê–õ–ï–ù–ò–Ø –ú–ï–†–û–ü–†–ò–Ø–¢–ò–Ø - –ù–ê–ß–ê–õ–û #}
        <form action="{{ url_for('delete_event', event_id=event.id) }}" method="POST"
              onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ ¬´{{ event.name }}¬ª –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º –º–µ—Å—Ç–∞ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!');">
            <button type="submit" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</button>
        </form>
        {# –§–û–†–ú–ê –î–õ–Ø –£–î–ê–õ–ï–ù–ò–Ø –ú–ï–†–û–ü–†–ò–Ø–¢–ò–Ø - –ö–û–ù–ï–¶ #}
    {% endif %} {# <--- –ó–ê–ö–†–´–í–ê–ï–ú IF –ó–î–ï–°–¨, –∞ –Ω–µ —á–µ—Ä–µ–∑ ELSE #}

</section> {# <--- –ó–ê–ö–†–´–í–ê–ï–ú <section class="event-header"> –ó–î–ï–°–¨ #}


<section class="seats-section">
    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ</h3>
    <div class="seats-legend">
        <div><span style="background: green; " class="legend-seat available"></span> –°–≤–æ–±–æ–¥–Ω–æ</div>
        <div><span  style="background: orange; " class="legend-seat selected"></span> –í–∞—à –≤—ã–±–æ—Ä</div>
        <div><span  style="background: red; " class="legend-seat booked"></span> –ó–∞–Ω—è—Ç–æ</div>
    </div>
    

<div class="seats-container">
    {% for seat in seats %}
    <div class="seat
        {% if seat.status == 'available' %}available{% endif %}
        {% if seat.status == 'booked' %}booked{% endif %}
        {% if seat.status == 'selected' %}selected{% endif %}"
        data-seat-id="{{ seat.id }}">
        {{ seat.number }}
    </div>
    {% endfor %}
</div>
</section>

<a href="{{ url_for('events_list') }}" class="btn">‚Üê –ù–∞–∑–∞–¥ –∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º</a>

{#
   –í–∞–º –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "btn-danger" –≤ –≤–∞—à static/style.css,
   –µ—Å–ª–∏ —É –≤–∞—Å –µ—â–µ –Ω–µ—Ç —Å—Ç–∏–ª–µ–π –¥–ª—è –∫—Ä–∞—Å–Ω–æ–π –∫–Ω–æ–ø–∫–∏.
#}
<style>
    .btn-danger {
        background-color: #dc3545; /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç */
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 20px; /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
        transition: background-color 0.3s ease;
    }
    .btn-danger:hover {
        background-color: #c82333; /* –¢–µ–º–Ω–µ–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–∫—Ü–∏–∏ –≤—ã–±–æ—Ä–∞ –º–µ—Å—Ç –Ω–∞ event_detail.html */
.seats-section {
    margin-top: 30px;
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.seats-section h3 {
    color: #333;
    margin-bottom: 20px;
}

.seats-legend {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.seats-legend div {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9em;
    color: #555;
}

.legend-seat {
    width: 20px;
    height: 20px;
    border-radius: 4px;
    border: 1px solid #ccc; /* –î–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≥—Ä–∞–Ω–∏—Ü—ã */
}

.seats-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); /* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ */
    gap: 10px;
    padding: 10px;
    background-color: #eee;
    border-radius: 5px;
}

.seat {
    width: 50px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –º–µ—Å—Ç–∞ */
    height: 50px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –º–µ—Å—Ç–∞ */
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #fff; /* –î–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ñ–æ–Ω, –µ—Å–ª–∏ –Ω–µ—Ç —Å—Ç–∞—Ç—É—Å–∞ */
    border: 1px solid #ccc;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.2s ease;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –º–µ—Å—Ç */
.seat.available {
    background-color: #28a745; /* –ó–µ–ª–µ–Ω—ã–π –¥–ª—è —Å–≤–æ–±–æ–¥–Ω—ã—Ö */
    color: white;
    border-color: #218838;
}

.seat.selected {
    background-color: #ffc107; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö */
    color: #333;
    border-color: #e0a800;
}

.seat.booked {
    background-color: #dc3545; /* –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö */
    color: white;
    border-color: #c82333;
    cursor: not-allowed;
}

.seat:not(.booked):hover {
    transform: scale(1.05); /* –õ–µ–≥–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
</style>
{% endblock %}